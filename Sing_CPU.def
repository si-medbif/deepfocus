Bootstrap: docker
From: ubuntu:18.04

%help
    Singularity image for deepfocus
    

%labels
MAINTAINER dumrong.mai@biotec.or.th
VERSION v0.1
ORIGINAL_SOURCE https://github.com/cialab/deepfocus

%post
    apt-get update && apt-get install -y --no-install-recommends \
            python3-dev python3-pip git openslide-tools \
            build-essential python3-setuptools\ 
            nano            
    pip3 install wheel
    pip3 install numpy 
    pip3 install scipy  
    pip3 install dicom
    pip3 install matplotlib
    pip3 install scikit-image
    pip3 install openslide-python
    pip3 install tensorflow
    pip3 install tflearn 
    
    # Get DeepFocus scripts
    cd /opt && git clone https://github.com/si-medbif/deepfocus.git
    apt-get remove -y python3-pip git
    rm -rf /var/lib/apt/lists/*
